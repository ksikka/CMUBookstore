<% if(books.length == 0) { %> 
  No books match this query
<% } else { %>
  <% for(var i = 0; i < books.length; i++) { %>
      <% var book = books[i] %>
      <% var book_id = book._id; %>
      <div class="papers" book_id="<%= book_id %>">

      <div>
        <span class="title"><%= book.title %></span>
        <span class="author">by <%= book.author %></span>
      </div>

        <% var courseStrings = []; %>
        <% for(var j = 0; j < books[i].course_ids.length; j++) { 
             var course = course_dictionary[books[i].course_ids[j]];
             if(course) { 
               courseStrings.push(course._id + ': ' + course.name);
             }
           } 
           if(courseStrings.length > 0) { %>
           <div>Required for <%= courseStrings.join(', ') %></div>
       <%  } %>

        <form>
    $<input type="text" name="price" />(must be 0 or higher, rounded to the nearest dollar)
    <button onclick="buy(this)" book_id="<%= book._id.toString() %> "type="button">Buy</button>
    <button onclick="sell(this)" book_id="<%= book._id.toString() %> "type="button">Sell</button>
  </form>
      <!-- <a onclick="viewMore(this)" href="#" book_id="<%= book_id %>">more info</a> -->

    </div>
  <% } %>
<% } %>
